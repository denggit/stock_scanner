# 上升通道策略前端回测使用说明

## 概述

本文档介绍如何使用前端界面进行上升通道策略的回测。前端提供了友好的用户界面，允许用户设置各种参数并查看回测结果。

## 功能特点

- 🎯 **策略选择**: 支持上升通道策略的回测
- 📊 **参数配置**: 提供完整的策略参数设置界面
- 📈 **结果展示**: 多维度展示回测结果和性能指标
- 🔄 **实时更新**: 支持实时参数调整和重新回测

## 使用步骤

### 1. 访问回测页面

在浏览器中访问回测页面，页面标题为"策略回测系统"。

### 2. 基础设置

在左侧边栏中进行基础设置：

#### 策略选择
- 选择"上升通道策略"

#### 股票池选择
- **全量股票**: 包含所有A股股票
- **非ST股票**: 排除ST股票（推荐）
- **上证50**: 上证50成分股
- **沪深300**: 沪深300成分股
- **中证500**: 中证500成分股

#### 回测参数
- **开始日期**: 回测开始时间
- **结束日期**: 回测结束时间
- **初始资金**: 回测初始资金金额（默认100万）
- **最大持仓数量**: 同时持有的最大股票数量（默认50只）

#### 资金分配策略
- **信号强度加权**: 根据信号强度分配资金
- **市值加权**: 根据股票市值分配资金
- **等权重**: 平均分配资金（推荐）

### 3. 策略参数设置

展开"策略参数设置"部分，配置上升通道策略的具体参数：

#### 通道评分参数
- **最小通道评分** (30.0-90.0): 通道质量评分的最小阈值
  - 默认值: 60.0
  - 建议范围: 50.0-70.0
  - 说明: 评分越高，通道质量越好，但选股数量可能减少

#### 通道斜率参数
- **通道斜率参数(k)** (1.0-3.0): 通道宽度倍数参数
  - 默认值: 2.0
  - 建议范围: 1.5-2.5
  - 说明: 控制通道的宽度，值越大通道越宽

#### 通道长度参数
- **最大通道长度** (60-200): 通道分析的最大回看天数
  - 默认值: 120
  - 建议范围: 100-150
  - 说明: 分析历史数据的时间窗口

#### 收益触发参数
- **收益触发阈值** (0.1-0.5): 触发重锚定的累计涨幅阈值
  - 默认值: 0.30
  - 建议范围: 0.25-0.35
  - 说明: 当累计涨幅超过此值时重新计算通道

#### 拟合优度参数
- **最小R²值** (0.1-0.4): 回归拟合优度的最小阈值
  - 默认值: 0.20
  - 建议范围: 0.15-0.25
  - 说明: 衡量通道拟合质量，值越高拟合越好

#### 通道宽度参数
- **最小通道宽度(%)** (0.02-0.10): 通道宽度的最小百分比
  - 默认值: 0.04
  - 建议范围: 0.03-0.06
  - 说明: 通道宽度的下限

- **最大通道宽度(%)** (0.10-0.30): 通道宽度的最大百分比
  - 默认值: 0.20
  - 建议范围: 0.15-0.25
  - 说明: 通道宽度的上限

### 4. 运行回测

点击"开始回测"按钮，系统将：

1. 根据设置的参数获取股票数据
2. 运行上升通道策略回测
3. 计算各种性能指标
4. 生成回测报告

### 5. 查看结果

回测完成后，结果将在三个标签页中展示：

#### 收益分析
- **主要指标**: 总收益率、最大回撤、夏普比率、年化收益
- **其他指标**: 交易次数、胜率、股票池信息
- **收益率曲线**: 策略收益率的时间序列图表

#### 交易记录
- 显示所有买卖交易记录
- 包含日期、股票代码、操作类型、价格、数量等信息
- 按时间倒序排列

#### 最新信号
- 显示当前最新的选股信号
- 包含股票代码、信号强度、推荐操作等信息

## 参数调优建议

### 保守策略
- 最小通道评分: 70.0
- 通道斜率参数: 1.5
- 收益触发阈值: 0.25
- 最小R²值: 0.25
- 最大持仓数量: 30

### 激进策略
- 最小通道评分: 50.0
- 通道斜率参数: 2.5
- 收益触发阈值: 0.35
- 最小R²值: 0.15
- 最大持仓数量: 70

### 平衡策略（推荐）
- 最小通道评分: 60.0
- 通道斜率参数: 2.0
- 收益触发阈值: 0.30
- 最小R²值: 0.20
- 最大持仓数量: 50

## 注意事项

1. **数据质量**: 确保回测期间有足够的历史数据
2. **参数合理性**: 避免设置过于极端的参数值
3. **回测周期**: 建议使用至少6个月的回测周期
4. **股票池选择**: 根据策略特点选择合适的股票池
5. **风险控制**: 注意最大回撤等风险指标

## 故障排除

### 常见问题

1. **回测失败**
   - 检查网络连接
   - 确认后端服务正常运行
   - 验证参数设置是否合理

2. **无交易记录**
   - 检查最小通道评分是否过高
   - 确认回测期间是否有符合条件的股票
   - 调整参数范围

3. **性能指标异常**
   - 检查初始资金设置
   - 确认回测周期是否合理
   - 验证股票池选择

### 技术支持

如遇到问题，请检查：
1. 浏览器控制台错误信息
2. 后端服务日志
3. 网络连接状态
4. 参数设置合理性

## 更新日志

- **v1.0.0**: 初始版本，支持基本的上升通道策略回测
- **v1.1.0**: 添加参数验证和错误处理
- **v1.2.0**: 优化结果展示和用户体验 