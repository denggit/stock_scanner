# 📁 目录结构自动更新说明

## 🎯 功能概述

本项目提供了自动更新目录结构的功能，确保 `docs/项目目录结构.md` 文件始终反映最新的项目结构。

## 🚀 使用方法

### 方法一：手动更新

```bash
# 使用Python脚本
python scripts/update_directory_structure.py

# 或使用Shell脚本
./bin/update_directory_structure.sh
```

### 方法二：自动更新（推荐）

项目已配置Git pre-commit钩子，每次提交代码时会自动更新目录结构。

## 🔧 配置说明

### 排除规则

脚本会自动排除以下文件和目录：

- 隐藏文件（以 `.` 开头）
- 系统文件（`.DS_Store`, `Thumbs.db` 等）
- 缓存目录（`__pycache__`, `.ipynb_checkpoints` 等）
- 虚拟环境（`venv`）
- IDE配置（`.idea`, `.vscode` 等）

### 简化目录

以下目录只显示目录名，不显示内部文件：

- `logs/` - 日志文件目录
- `results/` - 结果输出目录
- `docs/` - 文档目录

## 📝 文件描述

脚本内置了详细的文件描述映射，包括：

- 所有主要目录的功能说明
- 核心Python文件的作用描述
- 配置文件的用途说明
- 脚本文件的功能描述

## 🔄 更新机制

### 自动更新触发条件

1. **Git提交时**：通过pre-commit钩子自动触发
2. **手动执行**：运行更新脚本
3. **文件变化**：检测到项目结构变化时

### 更新内容

- 目录树结构
- 文件图标和描述
- 时间戳
- 版本信息

## 🛠️ 自定义配置

如需修改排除规则或添加新的文件描述，请编辑 `scripts/update_directory_structure.py` 文件中的相关配置：

```python
# 排除目录
self.exclude_dirs = {
    '.git', '__pycache__', '.ipynb_checkpoints', 
    'venv', '.idea', 'node_modules', '.vscode'
}

# 排除文件
self.exclude_files = {
    '.DS_Store', 'Thumbs.db', '.gitignore', '.gitattributes'
}

# 简化目录
self.simplify_dirs = {'logs', 'results', 'docs'}
```

## 📋 注意事项

1. **权限要求**：确保脚本有读取项目文件的权限
2. **Python环境**：需要Python 3.6+环境
3. **编码格式**：所有文件使用UTF-8编码
4. **Git钩子**：确保 `.git/hooks/pre-commit` 有执行权限

## 🐛 故障排除

### 常见问题

**Q: 脚本运行失败怎么办？**
A: 检查Python环境和文件权限，确保在项目根目录运行

**Q: Git钩子不工作？**
A: 确保钩子文件有执行权限：`chmod +x .git/hooks/pre-commit`

**Q: 某些文件没有被包含？**
A: 检查排除规则配置，或手动添加文件描述

**Q: 目录结构显示不正确？**
A: 检查文件编码，确保使用UTF-8格式

### 调试模式

如需调试，可以在脚本中添加详细输出：

```python
# 在 DirectoryStructureUpdater 类中添加
self.debug = True
```

## 📞 技术支持

如有问题，请检查：

1. Python版本和依赖
2. 文件权限设置
3. Git钩子配置
4. 项目路径设置

---

**最后更新**: 2024年12月19日
**维护者**: AI Assistant 