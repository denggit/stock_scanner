# ğŸš€ è‚¡ç¥¨æ‰«æå™¨ - å·¥å…·åŠŸèƒ½æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [ğŸ—ï¸ é¡¹ç›®æ¦‚è¿°](#-é¡¹ç›®æ¦‚è¿°)
- [ğŸ”§ æ ¸å¿ƒæ¨¡å—](#-æ ¸å¿ƒæ¨¡å—)
- [ğŸ“Š æ•°æ®å±‚](#-æ•°æ®å±‚)
- [ğŸ¯ ç­–ç•¥ç³»ç»Ÿ](#-ç­–ç•¥ç³»ç»Ÿ)
- [ğŸ“ˆ å›æµ‹ç³»ç»Ÿ](#-å›æµ‹ç³»ç»Ÿ)
- [ğŸ§  æœºå™¨å­¦ä¹ ](#-æœºå™¨å­¦ä¹ )
- [ğŸ” å› å­åˆ†æ](#-å› å­åˆ†æ)
- [ğŸŒ æœåŠ¡å±‚](#-æœåŠ¡å±‚)
- [ğŸ“± å‰ç«¯ç•Œé¢](#-å‰ç«¯ç•Œé¢)
- [ğŸ› ï¸ å·¥å…·ç±»](#ï¸-å·¥å…·ç±»)
- [ğŸ“š ä½¿ç”¨ç¤ºä¾‹](#-ä½¿ç”¨ç¤ºä¾‹)
- [ğŸš€ éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)

---

## ğŸ—ï¸ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„é‡åŒ–äº¤æ˜“å¹³å°ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›è‚¡ç¥¨æ•°æ®è·å–ã€ç­–ç•¥å¼€å‘ã€å›æµ‹åˆ†æã€å®æ—¶ç›‘æ§ç­‰åŠŸèƒ½ã€‚

### ğŸ¯ æ ¸å¿ƒç‰¹æ€§

- **å¤šæ•°æ®æºæ”¯æŒ**: AKShareã€å®ç¡•æ•°æ®æº
- **ä¸°å¯Œç­–ç•¥åº“**: 8ç§é¢„ç½®äº¤æ˜“ç­–ç•¥
- **å®Œæ•´å›æµ‹æ¡†æ¶**: æ”¯æŒå•ç­–ç•¥å’Œå¤šç­–ç•¥å›æµ‹
- **æœºå™¨å­¦ä¹ é›†æˆ**: çˆ†å‘å¼è‚¡ç¥¨é¢„æµ‹æ¨¡å‹
- **å› å­åˆ†æ**: ä¸Šå‡é€šé“å›å½’åˆ†æ
- **äº¤äº’å¼ç•Œé¢**: Streamlitæ„å»ºçš„Webç•Œé¢
- **RESTful API**: FastAPIæä¾›æ ‡å‡†åŒ–æ¥å£

### ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: FastAPI + Python 3.11+
- **å‰ç«¯**: Streamlit + Plotly
- **æ•°æ®æº**: AKShare + Baostock
- **æœºå™¨å­¦ä¹ **: scikit-learn + XGBoost
- **æ•°æ®å¤„ç†**: Pandas + NumPy
- **å¯è§†åŒ–**: Plotly + Matplotlib
- **æ—¥å¿—**: Python logging

---

## ğŸ”§ æ ¸å¿ƒæ¨¡å—

### 1. ä¸šåŠ¡å±‚æ¶æ„ (`backend/business/`)

é¡¹ç›®é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä¸šåŠ¡é€»è¾‘ç»Ÿä¸€ç®¡ç†ï¼š

```
business/
â”œâ”€â”€ backtest/     # å›æµ‹ä¸šåŠ¡
â”œâ”€â”€ data/         # æ•°æ®ä¸šåŠ¡
â”œâ”€â”€ factor/       # å› å­ä¸šåŠ¡
â”œâ”€â”€ ml/           # æœºå™¨å­¦ä¹ ä¸šåŠ¡
â””â”€â”€ strategies/   # ç­–ç•¥ä¸šåŠ¡
```

### 2. æœåŠ¡å±‚ (`backend/services/`)

- **StockService**: è‚¡ç¥¨æ•°æ®æœåŠ¡
- **StrategyService**: ç­–ç•¥æ‰§è¡ŒæœåŠ¡
- **BacktestService**: å›æµ‹æœåŠ¡

### 3. æ¥å£å±‚ (`backend/interface/`)

- **stock_interface**: è‚¡ç¥¨æ•°æ®API
- **strategy_interface**: ç­–ç•¥API
- **backtest_interface**: å›æµ‹API

---

## ğŸ“Š æ•°æ®å±‚

### 1. æ•°æ®è·å–å™¨ (`backend/business/data/data_fetcher.py`)

```python
from backend.business.data.data_fetcher import StockDataFetcher

# åˆ›å»ºæ•°æ®è·å–å™¨
fetcher = StockDataFetcher()

# è·å–è‚¡ç¥¨æ•°æ®
data = fetcher.fetch_stock_data(
    code="000001.SZ",
    start_date="2024-01-01",
    end_date="2024-12-31",
    period="daily"
)

# è·å–è‚¡ç¥¨åˆ—è¡¨
stock_list = fetcher.get_stock_list_with_cond(
    pool_name="sz50",
    ipo_date="2020-01-01",
    min_amount=100000000
)
```

### 2. å¤šæ•°æ®æºæ”¯æŒ

#### AKShareæ•°æ®æº

```python
from backend.business.data.source.akshare_src import AKShareSource

# è·å–è´¢åŠ¡æ•°æ®
financial_data = AKShareSource.get_financial_data("000001", "income")

# è·å–æœºæ„å‚ä¸åº¦
institution_data = AKShareSource.get_institution_participation("000001")

# è·å–è¡Œä¸šæ•°æ®
industry_data = AKShareSource.get_industry_data()
```

#### å®ç¡•æ•°æ®æº

```python
from backend.business.data.source.baostock_src import BaostockSource

# è·å–è‚¡ç¥¨æ•°æ®
data = BaostockSource.get_stock_data(
    code="000001.SZ",
    start_date="2024-01-01",
    end_date="2024-12-31",
    frequency="daily"
)

# è·å–è´¢åŠ¡æ•°æ®
profit_data = BaostockSource.get_profit_data(code="000001.SZ", year=2024)
balance_data = BaostockSource.get_balance_data(code="000001.SZ", year=2024)
```

### 3. æ•°æ®ç®¡ç†å™¨ (`backend/business/data/data_manager.py`)

```python
from backend.business.data.data_manager import DatabaseManager

# æ•°æ®åº“æ“ä½œ
db = DatabaseManager()

# ä¿å­˜è‚¡ç¥¨æ•°æ®
db.save_stock_data(data, "000001.SZ")

# æŸ¥è¯¢å†å²æ•°æ®
history_data = db.get_stock_history("000001.SZ", "2024-01-01", "2024-12-31")

# æ›´æ–°æ•°æ®çŠ¶æ€
db.update_data_status("000001.SZ", "daily", "2024-12-31")
```

---

## ğŸ¯ ç­–ç•¥ç³»ç»Ÿ

### 1. ç­–ç•¥åŸºç±» (`backend/business/strategies/base.py`)

```python
from backend.business.strategies.base import BaseStrategy

class MyStrategy(BaseStrategy):
    def __init__(self):
        super().__init__()
        self.name = "æˆ‘çš„ç­–ç•¥"
        self.description = "ç­–ç•¥æè¿°"
    
    def generate_signal(self, data):
        # å®ç°ç­–ç•¥é€»è¾‘
        signal = {
            'signal': 85.5,
            'buy_signal': 'å»ºè®®ä¹°å…¥',
            'risk_level': 'ä¸­ç­‰é£é™©'
        }
        return signal
    
    def validate_parameters(self, params):
        # å‚æ•°éªŒè¯
        required_params = ['signal', 'volume_ratio']
        for param in required_params:
            if param not in params:
                raise ValueError(f"ç¼ºå°‘å¿…éœ€å‚æ•°: {param}")
```

### 2. çˆ†å‘å¼é€‰è‚¡ç­–ç•¥

```python
from backend.business.strategies.explosive_stock import ExplosiveStockStrategy

# åˆå§‹åŒ–ç­–ç•¥
strategy = ExplosiveStockStrategy()

# è®¾ç½®å‚æ•°
strategy.set_parameters({
    "signal": 70.0,           # ä¿¡å·å¼ºåº¦é˜ˆå€¼
    "volume_ratio": 1.5,      # æˆäº¤é‡æ¯”ç‡
    "rsi_range": (45, 65),    # RSIèŒƒå›´
    "explosion_probability": 0.5,  # çˆ†å‘æ¦‚ç‡é˜ˆå€¼
    "weights": {
        "volume": 0.35,       # æˆäº¤é‡æƒé‡
        "momentum": 0.30,     # åŠ¨é‡æƒé‡
        "pattern": 0.20,      # å½¢æ€æƒé‡
        "volatility": 0.15    # æ³¢åŠ¨ç‡æƒé‡
    }
})

# ç”Ÿæˆä¿¡å·
signal = strategy.generate_signal(stock_data)
print(f"ä¿¡å·å¼ºåº¦: {signal['signal']}")
print(f"ä¹°å…¥å»ºè®®: {signal['buy_signal']}")
print(f"é£é™©ç­‰çº§: {signal['risk_level']}")
```

### 3. å‡çº¿å›è¸©ç­–ç•¥

```python
from backend.business.strategies.ma_pullback import MAPullbackStrategy

strategy = MAPullbackStrategy()
strategy.set_parameters({
    "ma_period": 20,          # å‡çº¿å‘¨æœŸ
    "lookback_period": 20,    # å›çœ‹å‘¨æœŸ
    "price_margin": 0.01,     # ä»·æ ¼å®¹å·®
    "volume_ratio": 1.2       # æˆäº¤é‡æ¯”ç‡
})

signal = strategy.generate_signal(stock_data)
```

### 4. ä¸Šå‡é€šé“ç­–ç•¥

```python
from backend.business.strategies.rising_channel import RisingChannelStrategy

strategy = RisingChannelStrategy()
strategy.set_parameters({
    "k": 2.0,                 # é€šé“å®½åº¦å€æ•°
    "L_max": 120,             # æœ€å¤§çª—å£é•¿åº¦
    "gain_trigger": 0.30,     # é‡é”šæ¶¨å¹…è§¦å‘
    "beta_delta": 0.15        # æ–œç‡å˜åŒ–é˜ˆå€¼
})

signal = strategy.generate_signal(stock_data)
```

### 5. å…¶ä»–ç­–ç•¥

- **çªç ´ç­–ç•¥** (`breakout.py`): ä»·æ ¼çªç ´è¯†åˆ«
- **æ³¢æ®µäº¤æ˜“ç­–ç•¥** (`swing_trading.py`): æ³¢æ®µæ“ä½œ
- **ç¿»å€ç­–ç•¥** (`double_up.py`): å¯»æ‰¾ç¿»å€æ½œåŠ›è‚¡
- **é•¿æœŸä¸Šæ¶¨ç­–ç•¥** (`long_term_uptrend.py`): é•¿æœŸè¶‹åŠ¿è¯†åˆ«
- **å¤´è‚©åº•ç­–ç•¥** (`hs_bottom.py`): å¤´è‚©åº•å½¢æ€è¯†åˆ«
- **æ”¾é‡ä¸Šæ¶¨ç­–ç•¥** (`continuous_rise.py`): æ”¾é‡ä¸Šæ¶¨è¯†åˆ«

---

## ğŸ“ˆ å›æµ‹ç³»ç»Ÿ

### 1. å›æµ‹å¼•æ“ (`backend/business/backtest/core/backtest_engine.py`)

```python
from backend.business.backtest_event.core.backtest_engine import BacktestEngine

# åˆ›å»ºå›æµ‹å¼•æ“
engine = BacktestEngine(initial_cash=100000.0, commission=0.0003)

# æ·»åŠ æ•°æ®
engine.add_data(stock_data)

# æ·»åŠ ç­–ç•¥
engine.add_strategy(MAStrategy, ma_period=20)

# è¿è¡Œå›æµ‹
results = engine.run("MAç­–ç•¥")

# è·å–ç»“æœ
print(f"æ€»æ”¶ç›Šç‡: {results['total_return']:.2%}")
print(f"å¹´åŒ–æ”¶ç›Šç‡: {results['annual_return']:.2%}")
print(f"æœ€å¤§å›æ’¤: {results['max_drawdown']:.2%}")
print(f"å¤æ™®æ¯”ç‡: {results['sharpe_ratio']:.2f}")
```

### 2. ä¾¿æ·å›æµ‹å‡½æ•°

```python
from backend.business.backtest_event import run_backtest, run_multi_strategy_backtest

# å•ç­–ç•¥å›æµ‹
results = run_backtest(
    data=stock_data,
    strategy_class=MAStrategy,
    initial_cash=100000.0,
    commission=0.0003,
    strategy_params={"ma_period": 20},
    strategy_name="MAç­–ç•¥"
)

# å¤šç­–ç•¥å›æµ‹
strategies = [
    {"name": "MAç­–ç•¥", "class": MAStrategy, "params": {"ma_period": 20}},
    {"name": "MACDç­–ç•¥", "class": MACDStrategy, "params": {}}
]

results = run_multi_strategy_backtest(
    data=stock_data,
    strategies=strategies,
    initial_cash=100000.0
)
```

### 3. ç»“æœåˆ†æå™¨ (`backend/business/backtest/core/result_analyzer.py`)

```python
from backend.business.backtest_event.core.result_analyzer import ResultAnalyzer

# åˆ›å»ºåˆ†æå™¨
analyzer = ResultAnalyzer()

# åˆ†æå›æµ‹ç»“æœ
analysis = analyzer.analyze(results)

# ç”ŸæˆæŠ¥å‘Š
report = analyzer.generate_report(results)

# æ¯”è¾ƒç­–ç•¥
comparison = analyzer.compare_strategies([results1, results2])
```

---

## ğŸ§  æœºå™¨å­¦ä¹ 

### 1. æ•°æ®æ”¶é›†å™¨ (`backend/business/ml/data_collector.py`)

```python
from backend.business.ml.data_collector import ExplosiveStockDataCollector

# åˆ›å»ºæ•°æ®æ”¶é›†å™¨
collector = ExplosiveStockDataCollector()

# æ”¶é›†è®­ç»ƒæ•°æ®
data = collector.collect_data(
    stock_pool="sz50",
    start_date="2020-01-01",
    end_date="2024-12-31"
)

# ç‰¹å¾å·¥ç¨‹
features = collector.extract_features(data)

# æ ‡ç­¾ç”Ÿæˆ
labels = collector.generate_labels(data, threshold=0.3)
```

### 2. æ¨¡å‹è®­ç»ƒå™¨ (`backend/business/ml/model_trainer.py`)

```python
from backend.business.ml.model_trainer import ExplosiveStockModelTrainer

# åˆ›å»ºè®­ç»ƒå™¨
trainer = ExplosiveStockModelTrainer()

# è®­ç»ƒæ¨¡å‹
model = trainer.train_model(
    stock_pool="sz50",
    start_date="2020-01-01",
    end_date="2024-12-31"
)

# æ¨¡å‹è¯„ä¼°
evaluation = trainer.evaluate_model(model, test_data)

# ä¿å­˜æ¨¡å‹
trainer.save_model(model, "models/explosive_stock_model.pkl")
```

### 3. é¢„æµ‹æœåŠ¡

```python
# åŠ è½½æ¨¡å‹
model = trainer.load_model("models/explosive_stock_model.pkl")

# é¢„æµ‹
prediction = model.predict_proba(features)
explosion_probability = prediction[0][1]

print(f"çˆ†å‘æ¦‚ç‡: {explosion_probability:.2%}")
```

---

## ğŸ” å› å­åˆ†æ

### 1. ä¸Šå‡é€šé“å› å­ (`backend/business/factor/core/engine/library/channel_analysis/`)

```python
from backend.business.factor.core.engine.library.channel_analysis import AscendingChannelRegression

# åˆ›å»ºåˆ†æå™¨
analyzer = AscendingChannelRegression()

# æ‹Ÿåˆé€šé“
state = analyzer.fit_channel(df)

# è·å–é€šé“ä¿¡æ¯
channel_info = state.to_dict()

print(f"æ–œç‡: {channel_info['beta']:.4f}")
print(f"é€šé“çŠ¶æ€: {channel_info['channel_status']}")
print(f"ä»Šæ—¥ä¸­è½´: {channel_info['mid_today']:.2f}")
print(f"ä»Šæ—¥ä¸Šæ²¿: {channel_info['upper_today']:.2f}")
print(f"ä»Šæ—¥ä¸‹æ²¿: {channel_info['lower_today']:.2f}")
```

### 2. å†å²é€šé“æ•°æ®è®¡ç®—

```python
# è®¡ç®—å†å²é€šé“æ•°æ®
history_df = analyzer.fit_channel_history(df, min_window_size=60)

# ä¼˜åŒ–è®¡ç®—ï¼ˆæŒ‰æ­¥é•¿ï¼‰
history_df = analyzer.fit_channel_history_optimized(
    df, 
    min_window_size=60, 
    step_days=5
)

# å¢é‡æ›´æ–°
updated_df = analyzer.update_channel_history_incremental(
    history_df, 
    new_data
)
```

### 3. å› å­æ€§èƒ½åˆ†æ

```python
from backend.business.factor.backtest.performance_analyzer import analyze_single_factor

# åˆ†æå› å­æ€§èƒ½
results = analyze_single_factor(
    factor_data=factor_data,
    returns=returns,
    factor_name="ä¸Šå‡é€šé“å› å­"
)

print(f"ICå€¼: {results['ic']:.4f}")
print(f"IRå€¼: {results['ir']:.4f}")
print(f"èƒœç‡: {results['win_rate']:.2%}")
```

---

## ğŸŒ æœåŠ¡å±‚

### 1. è‚¡ç¥¨æœåŠ¡ (`backend/services/stock_service.py`)

```python
from backend.services.stock_service import StockService

# åˆ›å»ºæœåŠ¡
service = StockService()

# è·å–è‚¡ç¥¨æ•°æ®
data = await service.get_stock_data(
    code="000001",
    period="daily",
    start_date="2024-01-01",
    end_date="2024-12-31",
    ma_periods=[5, 10, 20]
)

# è·å–æŒ‡æ ‡æ•°æ®
indicators = await service.get_stock_indicators(
    code="000001",
    indicators=["MA", "MACD", "RSI"],
    date="2024-12-31"
)
```

### 2. ç­–ç•¥æœåŠ¡ (`backend/services/strategy_service.py`)

```python
from backend.services.strategy_service import StrategyService

# åˆ›å»ºæœåŠ¡
service = StrategyService()

# æ‰«æè‚¡ç¥¨
results = await service.scan_stocks(
    strategy="çˆ†å‘å¼é€‰è‚¡ç­–ç•¥",
    params={
        "stock_pool": "éSTè‚¡ç¥¨",
        "signal": 70.0,
        "volume_ratio": 1.5
    }
)

# è·å–ç­–ç•¥åˆ—è¡¨
strategies = await service.list_strategies()
```

### 3. å›æµ‹æœåŠ¡ (`backend/services/backtest_service.py`)

```python
from backend.services.backtest_service import BacktestService

# åˆ›å»ºæœåŠ¡
service = BacktestService()

# è¿è¡Œå›æµ‹
results = await service.run_backtest(
    strategy="MAç­–ç•¥",
    start_date="2024-01-01",
    end_date="2024-12-31",
    backtest_init_params={
        "stock_pool": "éSTè‚¡ç¥¨",
        "initial_capital": 100000,
        "max_positions": 4
    },
    params={"ma_period": 20}
)

# è·å–å›æµ‹ç»“æœ
backtest_results = await service.get_backtest_results("backtest_id")
```

---

## ğŸ“± å‰ç«¯ç•Œé¢

### 1. æ•°æ®æŸ¥çœ‹å™¨ (`pages/data_viewer.py`)

è®¿é—® `http://localhost:8501/data_viewer` ä½¿ç”¨æ•°æ®æŸ¥çœ‹å™¨ï¼š

**åŠŸèƒ½ç‰¹æ€§**:
- äº¤äº’å¼Kçº¿å›¾ï¼ˆæ”¯æŒæ‹–åŠ¨ã€ç¼©æ”¾ï¼‰
- å¤šæŠ€æœ¯æŒ‡æ ‡å åŠ ï¼ˆå‡çº¿ã€MACDã€RSIã€å¸ƒæ—å¸¦ï¼‰
- ä¸Šå‡é€šé“åˆ†æï¼ˆå®æ—¶çŠ¶æ€å’Œè´¨é‡è¯„ä¼°ï¼‰
- æ•°æ®æœç´¢å’Œç­›é€‰
- è¯¦ç»†çš„æ•°æ®ç»Ÿè®¡ä¿¡æ¯

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# é€šè¿‡URLå‚æ•°ç›´æ¥è®¿é—®ç‰¹å®šè‚¡ç¥¨
http://localhost:8501/data_viewer?code=000001&name=å¹³å®‰é“¶è¡Œ&strategy=çˆ†å‘å¼é€‰è‚¡ç­–ç•¥
```

### 2. ç­–ç•¥æ‰«æå™¨ (`pages/strategy_scanner.py`)

è®¿é—® `http://localhost:8501/strategy_scanner` ä½¿ç”¨ç­–ç•¥æ‰«æå™¨ï¼š

**åŠŸèƒ½ç‰¹æ€§**:
- 8ç§é¢„ç½®äº¤æ˜“ç­–ç•¥
- å¯è§†åŒ–å‚æ•°é…ç½®
- å®æ—¶ç»“æœå±•ç¤º
- æ•°æ®å¯¼å‡ºåŠŸèƒ½
- ç­–ç•¥æ€§èƒ½å¯¹æ¯”

### 3. å›æµ‹é¡µé¢ (`pages/backtest.py`)

è®¿é—® `http://localhost:8501/backtest` ä½¿ç”¨å›æµ‹åŠŸèƒ½ï¼š

**åŠŸèƒ½ç‰¹æ€§**:
- ç­–ç•¥å›æµ‹éªŒè¯
- å‚æ•°ä¼˜åŒ–
- è¯¦ç»†å›æµ‹æŠ¥å‘Š
- å¤šç­–ç•¥æ€§èƒ½å¯¹æ¯”
- é£é™©æŒ‡æ ‡åˆ†æ

---

## ğŸ› ï¸ å·¥å…·ç±»

### 1. æŠ€æœ¯æŒ‡æ ‡è®¡ç®— (`backend/utils/indicators.py`)

```python
from backend.utils.indicators import CalIndicators

# ç§»åŠ¨å¹³å‡çº¿
ma20 = CalIndicators.sma(df, 20, 'close')
ema20 = CalIndicators.ema(df, 20, 'close')

# RSIæŒ‡æ ‡
rsi = CalIndicators.rsi(df, 14)

# MACDæŒ‡æ ‡
macd, signal, hist = CalIndicators.macd(df, 12, 26, 9)

# å¸ƒæ—å¸¦
mid, upper, lower = CalIndicators.bollinger_bands(df, 20, 2.0)

# KDJæŒ‡æ ‡
k, d, j = CalIndicators.kdj(df, 9, 3)

# DMIæŒ‡æ ‡
pdi, mdi, adx = CalIndicators.dmi(df, 14)

# ä¸Šå‡é€šé“åˆ†æ
channel_info = CalIndicators.ascending_channel(df, **params)
```

### 2. æ•°æ®æ ¼å¼åŒ– (`backend/utils/format_info.py`)

```python
from backend.utils.format_info import stock_code_dot, stock_code_plain

# æ ¼å¼åŒ–è‚¡ç¥¨ä»£ç 
code_with_dot = stock_code_dot("000001")  # è¿”å› "sz.000001"
code_plain = stock_code_plain("sz.000001")  # è¿”å› "000001"
```

### 3. APIå“åº”å¤„ç† (`backend/utils/api_response.py`)

```python
from backend.utils.api_response import convert_to_python_types

# è½¬æ¢æ•°æ®ç±»å‹ä¸ºPythonåŸç”Ÿç±»å‹
result = convert_to_python_types(dataframe_or_dict)
```

### 4. æ—¥å¿—å·¥å…· (`backend/utils/logger.py`)

```python
from backend.utils.logger import setup_logger

# è®¾ç½®æ—¥å¿—è®°å½•å™¨
logger = setup_logger("my_module", log_level=logging.INFO)

# è®°å½•æ—¥å¿—
logger.info("ä¿¡æ¯æ—¥å¿—")
logger.warning("è­¦å‘Šæ—¥å¿—")
logger.error("é”™è¯¯æ—¥å¿—")
```

---

## ğŸ“š ä½¿ç”¨ç¤ºä¾‹

### 1. å®Œæ•´çš„ç­–ç•¥æ‰«ææµç¨‹

```python
import asyncio
from backend.services.strategy_service import StrategyService
from backend.services.stock_service import StockService

async def main():
    # åˆ›å»ºæœåŠ¡
    strategy_service = StrategyService()
    stock_service = StockService()
    
    # æ‰«æè‚¡ç¥¨
    results = await strategy_service.scan_stocks(
        strategy="çˆ†å‘å¼é€‰è‚¡ç­–ç•¥",
        params={
            "stock_pool": "éSTè‚¡ç¥¨",
            "signal": 70.0,
            "volume_ratio": 1.5
        }
    )
    
    print(f"æ‰«æåˆ° {len(results)} åªè‚¡ç¥¨")
    
    # è·å–è¯¦ç»†ä¿¡æ¯
    for result in results[:5]:  # å‰5åªè‚¡ç¥¨
        code = result['code']
        data = await stock_service.get_stock_data(
            code=code,
            period="daily",
            start_date="2024-12-01",
            end_date="2024-12-31"
        )
        print(f"{code}: {result['name']} - ä¿¡å·å¼ºåº¦: {result['signal']}")

# è¿è¡Œ
asyncio.run(main())
```

### 2. å›æµ‹åˆ†ææµç¨‹

```python
from backend.business.backtest_event import run_backtest
from backend.business.backtest_event.strategies.ma import MAStrategy
from backend.business.data.data_fetcher import StockDataFetcher

# è·å–æ•°æ®
fetcher = StockDataFetcher()
data = fetcher.fetch_stock_data("000001.SZ", "2024-01-01", "2024-12-31")

# è¿è¡Œå›æµ‹
results = run_backtest(
  data=data,
  strategy_class=MAStrategy,
  initial_cash=100000.0,
  commission=0.0003,
  strategy_params={"ma_period": 20},
  strategy_name="MAç­–ç•¥"
)

# åˆ†æç»“æœ
print(f"æ€»æ”¶ç›Šç‡: {results['total_return']:.2%}")
print(f"å¹´åŒ–æ”¶ç›Šç‡: {results['annual_return']:.2%}")
print(f"æœ€å¤§å›æ’¤: {results['max_drawdown']:.2%}")
print(f"å¤æ™®æ¯”ç‡: {results['sharpe_ratio']:.2f}")
print(f"èƒœç‡: {results['win_rate']:.2%}")
```

### 3. å› å­åˆ†ææµç¨‹

```python
from backend.business.factor.core.engine.library.channel_analysis import AscendingChannelRegression
from backend.business.data.data_fetcher import StockDataFetcher

# è·å–æ•°æ®
fetcher = StockDataFetcher()
data = fetcher.fetch_stock_data("000001.SZ", "2024-01-01", "2024-12-31")

# ä¸Šå‡é€šé“åˆ†æ
analyzer = AscendingChannelRegression()
state = analyzer.fit_channel(data)

# è·å–é€šé“ä¿¡æ¯
channel_info = state.to_dict()

print(f"æ–œç‡: {channel_info['beta']:.4f}")
print(f"é€šé“çŠ¶æ€: {channel_info['channel_status']}")
print(f"æ‹Ÿåˆè´¨é‡: {channel_info['r2']:.3f}")
print(f"é€šé“å®½åº¦: {channel_info['width_pct']:.2%}")
```

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone <repository_url>
cd stock_scanner

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
# æˆ–
venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨åç«¯æœåŠ¡
python run_backend.py

# å¯åŠ¨å‰ç«¯ç•Œé¢
python run_frontend.py
```

### 3. è®¿é—®åœ°å€

- **å‰ç«¯ç•Œé¢**: http://localhost:8501
- **åç«¯API**: http://localhost:8000
- **APIæ–‡æ¡£**: http://localhost:8000/docs

### 4. ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# åç«¯é…ç½®
BACKEND_URL=localhost
BACKEND_PORT=8000

# æ•°æ®åº“é…ç½®
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_USER=your_username
MYSQL_PASSWORD=your_password
MYSQL_DATABASE=stock_scanner

# Redisé…ç½®
REDIS_HOST=localhost
REDIS_PORT=6379
```

### 5. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# ä½¿ç”¨Gunicornå¯åŠ¨åç«¯
gunicorn backend.app:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000

# ä½¿ç”¨Nginxåå‘ä»£ç†
# é…ç½®Nginxé…ç½®æ–‡ä»¶
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¸¸è§é—®é¢˜

1. **æ•°æ®è·å–å¤±è´¥**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - éªŒè¯æ•°æ®æºé…ç½®
   - æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

2. **ç­–ç•¥æ‰§è¡Œé”™è¯¯**
   - æ£€æŸ¥å‚æ•°é…ç½®
   - éªŒè¯æ•°æ®æ ¼å¼
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—

3. **å›æµ‹ç»“æœå¼‚å¸¸**
   - æ£€æŸ¥æ—¥æœŸèŒƒå›´
   - éªŒè¯ç­–ç•¥å‚æ•°
   - æŸ¥çœ‹æ•°æ®è´¨é‡

### æ—¥å¿—ä½ç½®

- **åº”ç”¨æ—¥å¿—**: `logs/app.log`
- **æœåŠ¡æ—¥å¿—**: `logs/*/`
- **é”™è¯¯æ—¥å¿—**: æ§åˆ¶å°è¾“å‡º

### è”ç³»æ–¹å¼

- **é¡¹ç›®æ–‡æ¡£**: `docs/` ç›®å½•
- **APIæ–‡æ¡£**: http://localhost:8000/docs
- **ä½¿ç”¨ç¤ºä¾‹**: `docs/æ¨¡å—ä½¿ç”¨ç¤ºä¾‹/`

---

**æœ€åæ›´æ–°æ—¶é—´**: 2025å¹´8æœˆ5æ—¥
**æ–‡æ¡£ç‰ˆæœ¬**: v2.0 